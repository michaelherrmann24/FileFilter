(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t){},457:function(e,t,n){},458:function(e,t,n){},471:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(33),c=n.n(i),s=(n(85),n(5)),o=n(6),u=n(14),l=n(13),h=n(15),f=n(9),p=n(19),d={logGroups:[],selectedGroup:{},page:[],filters:{},pagination:{page:0,pageSize:500}},v=Object(a.createContext)(d),b=function(e,t){return t&&t.reduce&&t.reduce(e)||e},m=function(e){var t=e.children,n=Object(a.useReducer)(b,d),i=Object(p.a)(n,2),c=i[0],s=i[1];return r.a.createElement(v.Provider,{value:Object(f.a)({},c,{dispatch:s})},t)},g=n(477),O=n(476),j=n(474),y=n(475),w={aws:{},profilesLoaded:!1},E=Object(a.createContext)(w),k=function(e,t){return t&&t.reduce&&t.reduce(e)||e},x=function(e){var t=e.children,n=Object(a.useReducer)(k,w),i=Object(p.a)(n,2),c=i[0],s=i[1];return r.a.createElement(E.Provider,{value:Object(f.a)({},c,{dispatch:s})},t)},D=n(24),L=n.n(D),C=n(20),G=function(){function e(t){Object(s.a)(this,e),this.value=t}return Object(o.a)(e,[{key:"reduce",value:function(e){return Object(f.a)({},e,{logGroups:this.value})}}]),e}(),F=function(){function e(t){Object(s.a)(this,e),this.value=t}return Object(o.a)(e,[{key:"reduce",value:function(e){return Object(f.a)({},e,{selectedGroup:this.value})}}]),e}(),P=function(){function e(t){Object(s.a)(this,e),this.value=t}return Object(o.a)(e,[{key:"reduce",value:function(e){return Object(f.a)({},e,{page:this.value})}}]),e}(),S=function(){function e(t){Object(s.a)(this,e),this.value=t}return Object(o.a)(e,[{key:"reduce",value:function(e){return Object(f.a)({},e,{filters:Object(f.a)({},e.filters,{regexFilter:this.value})})}}]),e}(),N=function(){function e(t,n){Object(s.a)(this,e),this.value=n,this.profile=t}return Object(o.a)(e,[{key:"reduce",value:function(e){return Object(f.a)({},e,{aws:Object(f.a)({},e.aws,Object(C.a)({},this.profile,Object(f.a)({},e.aws[this.profile],{credentials:Object(f.a)({},e.aws[this.profile].credentials,this.value)})))})}}]),e}(),T=function(){function e(t,n){Object(s.a)(this,e),this.value=n,this.profile=t}return Object(o.a)(e,[{key:"reduce",value:function(e){return Object(f.a)({},e,{aws:Object(f.a)({},e.aws,Object(C.a)({},this.profile,Object(f.a)({},e.aws[this.profile],{options:Object(f.a)({},e.aws[this.profile].options,this.value)})))})}}]),e}(),_=function(){function e(t,n){Object(s.a)(this,e),this.value=n,this.profile=t}return Object(o.a)(e,[{key:"reduce",value:function(e){return Object(f.a)({},e,{aws:Object(f.a)({},e.aws,Object(C.a)({},this.profile,Object(f.a)({},e.aws[this.profile],this.value[this.profile])))})}}]),e}(),R=function(){function e(t){Object(s.a)(this,e),this.value=t}return Object(o.a)(e,[{key:"reduce",value:function(e){return Object(f.a)({},e,{profilesLoaded:this.value})}}]),e}(),W=function(){function e(t){Object(s.a)(this,e),this.value=t}return Object(o.a)(e,[{key:"reduce",value:function(e){return Object(f.a)({},e,{selectedProfile:this.value})}}]),e}(),I=(n(86),function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).call(this,e))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"select",value:function(e){var t=Object.entries(this.context.aws).filter(function(t){var n=Object(p.a)(t,2),a=n[0];n[1];return e.target.value===a}).map(function(e){var t=Object(p.a)(e,2);t[0];return t[1]}).reduce(function(e,t){return t});t&&this.context.dispatch(new W(t))}},{key:"componentDidMount",value:function(){this.context.dispatch(new W(this.context.aws.default))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Profiles"),r.a.createElement(L.a,{as:"select",onChange:this.select.bind(this),defaultValue:"default"},Object.entries(this.context.aws).map(function(e){var t=Object(p.a)(e,2),n=t[0];t[1];return r.a.createElement("option",{key:n,title:n},n)})))}}]),t}(a.Component));I.contextType=E;var V=n(8),H=n.n(V),A=n(16),K=(n(94),{dark:{"--color":"midnightblue","--highlight-color":"yellow","--opacity":"0.9"},light:{"--color":"white","--highlight-color":"yellow","--opacity":"0.6"}}),Q=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).dropRef=r.a.createRef(),n.state={highlight:""},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"stopEvent",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"handleDragOver",value:function(e){this.stopEvent(e),this.setHighlight(!0)}},{key:"handleDragIn",value:function(e){this.stopEvent(e),this.setHighlight(!0)}},{key:"handleDragOut",value:function(e){this.stopEvent(e),this.setHighlight(!1)}},{key:"handleDrop",value:function(e){if(this.stopEvent(e),this.setHighlight(!1),this.props.handleDrop)try{this.props.handleDrop(e.dataTransfer.files)}catch(e){console.error("error handling Drop event",e)}}},{key:"setHighlight",value:function(e){this.setState(function(t){return Object(f.a)({},t,{highlight:e?"highlight":""})})}},{key:"componentDidMount",value:function(){this.updateCSSVariables(K[this.props.theme]);var e=this.dropRef.current;e&&(e.addEventListener("dragenter",this.handleDragIn.bind(this)),e.addEventListener("dragleave",this.handleDragOut.bind(this)),e.addEventListener("dragover",this.handleDragOver.bind(this)),e.addEventListener("drop",this.handleDrop.bind(this)))}},{key:"componentWillUnmount",value:function(){var e=this.dropRef.current;e&&(e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDragOver),e.removeEventListener("drop",this.handleDrop))}},{key:"updateCSSVariables",value:function(e){var t=this;Object.entries(e).forEach(function(e){var n=Object(p.a)(e,2),a=n[0],r=n[1];return t.dropRef.current.style.setProperty(a,r)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"file-drop-wrapper ".concat(this.state.highlight),ref:this.dropRef},r.a.createElement("div",{className:"file-drop ".concat(this.state.highlight)},this.props.children))}}]),t}(a.Component),M=function(){function e(){Object(s.a)(this,e),this.list=[],this.listeners=[]}return Object(o.a)(e,[{key:"addDeferred",value:function(e){this.list.push(e),this.notify()}},{key:"addListener",value:function(e){this.listeners.push(e),this.notify()}},{key:"notify",value:function(){if(this.listeners.length>0&&this.list.length>0){var e=this.list.shift();this.listeners.shift().execute(e),this.notify()}}}]),e}(),U=function e(t){var n=this;Object(s.a)(this,e),this.file=t,this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})},q=function(){function e(t){Object(s.a)(this,e),this.queue=t,this.reader=new FileReader}return Object(o.a)(e,[{key:"execute",value:function(){var e=Object(A.a)(H.a.mark(function e(t){var n=this;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.reader.onload=function(e){t.resolve(e.target.result),n.queue.addListener(n)},this.reader.readAsText(t.file);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),B=function(){function e(t){Object(s.a)(this,e),this.fileQueue=new M;for(var n=0;n<t;n++)this.fileQueue.addListener(new q(this.fileQueue))}return Object(o.a)(e,[{key:"readFile",value:function(){var e=Object(A.a)(H.a.mark(function e(t){var n;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new U(t),this.fileQueue.addDeferred(n),e.abrupt("return",n.promise);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();B.getInstance=function(){return B.instance||(B.instance=new B(6)),B.instance};var J=/\r\n|\n/,z=/\[(.*?)\]/,$=/(.*?)=(.*)/,X=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"processFile",value:function(){var e=Object(A.a)(H.a.mark(function e(t){var n,a,r,i,c=this;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=B.getInstance(),a="credentials"===t.name?N:T,e.next=4,n.readFile(t);case 4:return r=e.sent,i=null,r.split(J).forEach(function(e){var t=z.exec(e);t&&t[1]&&(i=t[1],c.context.dispatch(new _(i,Object(C.a)({},i,{}))));var n=$.exec(e);if(n&&n[1]&&n[2]){var r={};r[n[1].trim()]=n[2].trim();var s=new a(i,r);c.context.dispatch(s)}}),e.abrupt("return");case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleDrop",value:function(){var e=Object(A.a)(H.a.mark(function e(t){var n,a;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.length>0)){e.next=12;break}for(n=[],a=0;a<t.length;a++)n.push(this.processFile(t[a]));return e.prev=3,e.next=6,Promise.all(n);case 6:this.context.dispatch(new R(!0)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(Q,{theme:"light",handleDrop:this.handleDrop.bind(this)},"Drop AWS profile files")}}]),t}(a.Component);X.contextType=E;var Y=n(74),Z=function(){function e(t,n,a){Object(s.a)(this,e),this.awsCloudWatchLogs=new Y.CloudWatchLogs({accessKeyId:t,secretAccessKey:n,region:a})}return Object(o.a)(e,[{key:"getLogGroups",value:function(){var e=Object(A.a)(H.a.mark(function e(){var t=this;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){t.awsCloudWatchLogs.describeLogGroups(function(t,a){t&&(console.log(t),n(t)),a&&e(a.logGroups)})}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"getLogEvents",value:function(){var e=Object(A.a)(H.a.mark(function e(t){var n=this;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,a){n.awsCloudWatchLogs.filterLogEvents(t,function(t,n){t&&(console.log(t),a(t)),n&&e(n.events)})}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),ee=function(e){function t(e){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).call(this,e))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){var e=Object(A.a)(H.a.mark(function e(t){var n,a,r,i,c,s;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.props.profile)||n===t.profile){e.next=17;break}if(a=n.options.region,r=n.credentials.aws_access_key_id,i=n.credentials.aws_secret_access_key,!r||!i){e.next=17;break}return c=new Z(r,i,a),e.prev=7,e.next=10,c.getLogGroups();case 10:s=e.sent,this.context.dispatch(new G(s)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.log(e.t0);case 17:case"end":return e.stop()}},e,this,[[7,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"selectLogGroup",value:function(e){this.context.dispatch(new F(this.context.logGroups[e.target.value]))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Log Group"),r.a.createElement(L.a,{as:"select",onChange:this.selectLogGroup.bind(this),defaultValue:""},r.a.createElement("option",null),this.context.logGroups.map(function(e,t){return r.a.createElement("option",{key:t,value:t},e.logGroupName)})))}}]),t}(a.Component);ee.contextType=v;var te=n(3);function ne(e){var t=Object(te.a)({},e),n=Object(a.useContext)(v),i=n.filters,c=n.dispatch;return r.a.createElement("div",t,r.a.createElement(L.a,{className:"",as:"input",type:"text",onChange:function(e){c(new S(new RegExp(e.target.value)))},placeholder:"regex filter",defaultValue:i.regexFilter}))}var ae=n(473),re=(n(457),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(ae.a,{fluid:!0},this.context.page.filter(function(t){return!e.context.filters||!e.context.filters.regexFilter||e.context.filters.regexFilter.test(t)}).map(function(e,t){return r.a.createElement(j.a,{key:t},r.a.createElement("div",{className:"num-col text-center"},t),r.a.createElement(y.a,{md:11},e))}))}}]),t}(a.Component));re.contextType=v;var ie=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(o.a)(t,[{key:"fetchEvents",value:function(){var e=Object(A.a)(H.a.mark(function e(){var t,n,a,r,i,c,s,o;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.profile,a=t.logGroup,r=n.options.region,i=n.credentials.aws_access_key_id,c=n.credentials.aws_secret_access_key,!i||!c){e.next=17;break}return s=new Z(i,c,r),e.prev=6,e.next=9,s.getLogEvents({logGroupName:a,logStreamNamePrefix:"20"});case 9:e.t0=function(e){return e.message},o=e.sent.map(e.t0),this.context.dispatch(new P(o)),e.next=17;break;case 14:e.prev=14,e.t1=e.catch(6),console.log(e.t1);case 17:case"end":return e.stop()}},e,this,[[6,14]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchEvents()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.profile,a=t.logGroup;n&&a&&n!==e.profile&&a!==e.logGroup&&this.fetchEvents()}},{key:"render",value:function(){return r.a.createElement(re,null)}}]),t}(a.Component);ie.contextType=v;var ce=n(478),se=/\r\n|\n/,oe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={files:[]},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"processFile",value:function(){var e=Object(A.a)(H.a.mark(function e(t){var n,a,r;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=B.getInstance(),e.next=3,n.readFile(t);case 3:a=e.sent,r=a.split(se),this.context.dispatch(new P(r));case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleDrop",value:function(){var e=Object(A.a)(H.a.mark(function e(t){var n,a;return H.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("files",t),n=[],t&&t.length>0){for([],a=0;a<t.length;a++)n.push(t[a]);this.setState({files:n}),this.processFile(n[0])}case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"selectFile",value:function(e){var t=this.state.files.filter(function(t){return e.target.value===t.name}).reduce(function(e,t){return t});this.processFile(t)}},{key:"render",value:function(){return console.log("state",this.state),this.state.files.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("label",null,"Files"),r.a.createElement(ce.a,{as:"select",onChange:this.selectFile.bind(this),defaultValue:this.state.files[0]},this.state.files.map(function(e){return console.log(e),r.a.createElement("option",{key:e.name,value:e.name,title:e.name},e.name)}))):r.a.createElement(Q,{theme:"light",handleDrop:this.handleDrop.bind(this)},"Drop file")}}]),t}(a.Component);oe.contextType=v;n(458);var ue=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={selectedTab:"file"},n}return Object(h.a)(t,e),Object(o.a)(t,[{key:"tabSelect",value:function(e){this.setState({selectedTab:e})}},{key:"render",value:function(){return r.a.createElement(m,null,r.a.createElement(x,null,r.a.createElement("div",{className:"content-holder"},r.a.createElement("header",null,r.a.createElement(g.a,{onSelect:this.tabSelect.bind(this)},r.a.createElement(O.a,{eventKey:"file",title:"File"},r.a.createElement(oe,null)),r.a.createElement(O.a,{eventKey:"aws",title:"AWS"},r.a.createElement(E.Consumer,null,function(e){return e.profilesLoaded&&r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,null,r.a.createElement(y.a,{md:6},r.a.createElement(I,null))),r.a.createElement(j.a,null,r.a.createElement(y.a,{md:6},r.a.createElement(ee,{test:"test",profile:e.selectedProfile}))))||r.a.createElement(j.a,{className:"p-4"},r.a.createElement(y.a,{md:6},r.a.createElement(X,null)))}))),r.a.createElement(j.a,null,r.a.createElement(y.a,{md:12},r.a.createElement(ne,null)))),r.a.createElement("div",{className:"content"},"file"===this.state.selectedTab&&r.a.createElement(v.Consumer,null,function(e){return r.a.createElement(re,null)}),"aws"===this.state.selectedTab&&r.a.createElement(E.Consumer,null,function(e){return e.profilesLoaded&&e.selectedProfile&&r.a.createElement(v.Consumer,null,function(t){return t.selectedGroup&&t.selectedGroup.logGroupName&&r.a.createElement(ie,{profile:e.selectedProfile,logGroup:t.selectedGroup.logGroupName})})})),r.a.createElement("footer",null))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ue,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},80:function(e,t,n){e.exports=n(471)},85:function(e,t,n){},86:function(e,t,n){},94:function(e,t,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.7ccc187f.chunk.js.map