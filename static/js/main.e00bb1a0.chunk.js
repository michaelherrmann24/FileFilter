(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{462:function(e,t,n){},463:function(e,t,n){},464:function(e,t,n){},465:function(e,t,n){},477:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(35),s=n.n(r),c=(n(91),n(5)),l=n(6),o=n(12),u=n(11),h=n(13),f=n(9),p=n(17),d={logGroups:[],selectedGroup:{},page:[],index:[],filters:{},tail:!1,pagination:{page:0,pageSize:500},selectedProfile:{options:{},credentials:{}},profilesLoaded:!1,regions:{"us-east-2":"US East (Ohio)","us-east-1":"US East (N. Virginia)","us-west-1":"US West (N. California)","us-west-2":"US West (Oregon)","ap-east-1":"Asia Pacific (Hong Kong)","ap-south-1":"Asia Pacific (Mumbai)","ap-northeast-3":"Asia Pacific (Osaka-Local)","ap-northeast-2":"Asia Pacific (Seoul)","ap-southeast-1":"Asia Pacific (Singapore)","ap-southeast-2":"Asia Pacific (Sydney)","ap-northeast-1":"Asia Pacific (Tokyo)","ca-central-1":"Canada (Central)","cn-north-1":"China (Beijing)","cn-northwest-1":"China (Ningxia)","eu-west-1":"EU (Ireland)","eu-west-2":"EU (London)","eu-west-3":"EU (Paris)","eu-north-1":"EU (Stockholm)","sa-east-1":"South America (S\xe3o Paulo)","us-gov-east-1":"AWS GovCloud (US-East)","us-gov-west-1":"AWS GovCloud (US)"},views:{right:"filters",left:"load"}},v=Object(a.createContext)(d),g=function(e,t){return t&&t.reduce&&t.reduce(e)||e},m=function(e){var t=e.children,n=Object(a.useReducer)(g,d),r=Object(p.a)(n,2),s=r[0],c=r[1];return i.a.createElement(v.Provider,{value:Object(f.a)({},s,{dispatch:c})},t)},b=n(483),y=n(482),O=n(480),k=n(80),j={aws:{}},w=Object(a.createContext)(j),E=function(e,t){return t&&t.reduce&&t.reduce(e)||e},x=function(e){var t=e.children,n=Object(a.useReducer)(E,j),r=Object(p.a)(n,2),s=r[0],c=r[1];return i.a.createElement(w.Provider,{value:Object(f.a)({},s,{dispatch:c})},t)},S=n(479),L=n(25),P=n.n(L),C=n(36),F=function(){function e(t){Object(c.a)(this,e),this.value=t}return Object(l.a)(e,[{key:"reduce",value:function(e){return console.log("AddLogGroups",this.value),Object(f.a)({},e,{logGroups:this.value})}}]),e}(),D=function(){function e(t){Object(c.a)(this,e),this.value=t}return Object(l.a)(e,[{key:"reduce",value:function(e){return console.log("SelectLogGroup",this.value),Object(f.a)({},e,{selectedGroup:this.value})}}]),e}(),N=function(){function e(t){Object(c.a)(this,e),this.value=t}return Object(l.a)(e,[{key:"reduce",value:function(e){return console.log("SetPage",this.value),Object(f.a)({},e,{page:this.value})}}]),e}(),_=function(){function e(t){Object(c.a)(this,e),this.value=t}return Object(l.a)(e,[{key:"reduce",value:function(e){return console.log("SetTail",this.value),Object(f.a)({},e,{tail:this.value})}}]),e}(),R=function(){function e(t){Object(c.a)(this,e),this.value=t}return Object(l.a)(e,[{key:"reduce",value:function(e){return console.log("SetIndex",this.value),Object(f.a)({},e,{index:this.value})}}]),e}(),G=function(){function e(t){Object(c.a)(this,e),this.value=t}return Object(l.a)(e,[{key:"reduce",value:function(e){return console.log("SetRegexFilter",this.value),Object(f.a)({},e,{filters:Object(f.a)({},e.filters,{regexFilter:this.value})})}}]),e}(),T=function(){function e(t,n){Object(c.a)(this,e),this.value=n,this.profile=t}return Object(l.a)(e,[{key:"reduce",value:function(e){return Object(f.a)({},e,{aws:Object(f.a)({},e.aws,Object(C.a)({},this.profile,Object(f.a)({},e.aws[this.profile],{options:Object(f.a)({},e.aws[this.profile]&&e.aws[this.profile].options,this.value&&this.value.options),credentials:Object(f.a)({},e.aws[this.profile]&&e.aws[this.profile].credentials,this.value&&this.value.credentials)})))})}}]),e}(),z=function(){function e(t){Object(c.a)(this,e),this.value=t}return Object(l.a)(e,[{key:"reduce",value:function(e){return Object(f.a)({},e,{profilesLoaded:this.value})}}]),e}(),I=function(){function e(t){Object(c.a)(this,e),this.value=t}return Object(l.a)(e,[{key:"reduce",value:function(e){return console.log("AWSSelectProfile",this.value),Object(f.a)({},e,{selectedProfile:Object(f.a)({},e.selectedProfile,{options:Object(f.a)({},e.selectedProfile.options,this.value.options),credentials:Object(f.a)({},e.selectedProfile.credentials,this.value.credentials)})})}}]),e}(),A=function(){function e(t){Object(c.a)(this,e),this.value=t}return Object(l.a)(e,[{key:"reduce",value:function(e){return console.log("SetViewSection",this.value),Object(f.a)({},e,{views:Object(f.a)({},e.views,this.value)})}}]),e}(),U=function(){function e(t){Object(c.a)(this,e),this.value=t}return Object(l.a)(e,[{key:"reduce",value:function(e){return console.log("SetPagination",this.value),Object(f.a)({},e,{pagination:Object(f.a)({},e.pagination,this.value)})}}]),e}(),W=function(){function e(t){Object(c.a)(this,e),this.value=t}return Object(l.a)(e,[{key:"reduce",value:function(e){return console.log("SyncData",this.value),Object(f.a)({},this.value)}}]),e}(),H=(n(92),function(e){function t(e){var n,a=e.profiles,i=e.rest;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,Object(f.a)({},a,i)))).state={profiles:a}||{profiles:{}},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"select",value:function(e){var t=Object.entries(this.state.profiles).filter(function(t){var n=Object(p.a)(t,2),a=n[0];n[1];return e.target.value===a}).map(function(e){var t=Object(p.a)(e,2);t[0];return t[1]}).reduce(function(e,t){return t});console.log("selectedProfileEntry",t),t&&this.context.profilesLoaded&&this.context.dispatch(new I(t))}},{key:"componentDidMount",value:function(){this.context.dispatch(new I(this.state.profiles.default))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("label",null,"Profile"),i.a.createElement(P.a,{as:"select",onChange:this.select.bind(this),defaultValue:"default"},Object.entries(this.state.profiles).map(function(e){var t=Object(p.a)(e,2),n=t[0];t[1];return i.a.createElement("option",{key:n,title:n},n)})))}}]),t}(a.Component));H.contextType=v;var M=n(78),V=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"changeHandler",value:function(e){this.context.dispatch(new I({options:{region:e.target.value}}))}},{key:"render",value:function(){var e=this.context.selectedProfile&&this.context.selectedProfile.options&&this.context.selectedProfile.options.region||"ap-southeast-2";return i.a.createElement(i.a.Fragment,null,i.a.createElement("label",null,"Region"),i.a.createElement(M.a,{as:"select",onChange:this.changeHandler.bind(this),defaultValue:e},Object.entries(this.context.regions).map(function(e){var t=Object(p.a)(e,2),n=t[0],a=t[1];return i.a.createElement("option",{key:n,value:n},a)})))}}]),t}(a.Component);V.contextType=v;var J=n(10),K=n.n(J),Q=n(16),B=n(79),q=function(){function e(t,n,a){Object(c.a)(this,e),this.awsCloudWatchLogs=new B.CloudWatchLogs({accessKeyId:t,secretAccessKey:n,region:a})}return Object(l.a)(e,[{key:"getLogGroups",value:function(){var e=Object(Q.a)(K.a.mark(function e(){var t=this;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){t.awsCloudWatchLogs.describeLogGroups(function(t,a){t&&(console.log(t),n(t)),a&&e(a.logGroups)})}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"getLogEvents",value:function(){var e=Object(Q.a)(K.a.mark(function e(t){var n=this;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,a){n.awsCloudWatchLogs.filterLogEvents(t,function(t,n){t&&(console.log(t),a(t)),n&&e(n.events)})}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),Y=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).region=void 0,n.key=void 0,n.secret=void 0,n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.context.selectedProfile,t=e&&e.options&&e.options.region||this.region,n=e&&e.credentials&&e.credentials.aws_access_key_id||this.key,a=e&&e.credentials&&e.credentials.aws_secret_access_key||this.secret;this.region===t&&this.key===n&&this.secret===a||(this.region=t,this.key=n,this.secret=a,this.fetchLogGroups())}},{key:"fetchLogGroups",value:function(){var e=Object(Q.a)(K.a.mark(function e(){var t,n;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("fetchLogGroups",this),!(this.key&&this.secret&&this.region)){e.next=14;break}return console.log("fetchLogGroups fetching",this),t=new q(this.key,this.secret,this.region),e.prev=4,e.next=7,t.getLogGroups();case 7:n=e.sent,this.context.dispatch(new F(n)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}},e,this,[[4,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this.context.selectedProfile;this.region=e&&e.options&&e.options.region||null,this.key=e&&e.credentials&&e.credentials.aws_access_key_id||null,this.secret=e&&e.credentials&&e.credentials.aws_secret_access_key||null,console.log("componentDidMount",this),this.fetchLogGroups(e)}},{key:"selectLogGroup",value:function(e){this.context.dispatch(new D(this.context.logGroups[e.target.value]))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("label",null,"Log Group"),i.a.createElement(P.a,{as:"select",onChange:this.selectLogGroup.bind(this),defaultValue:""},i.a.createElement("option",null),this.context.logGroups.map(function(e,t){return i.a.createElement("option",{key:t,value:t},e.logGroupName)})))}}]),t}(a.Component);Y.contextType=v;n(462);var $={dark:{"--color":"midnightblue","--highlight-color":"yellow","--opacity":"0.9"},light:{"--color":"white","--highlight-color":"yellow","--opacity":"0.6"}},X=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).dropRef=i.a.createRef(),n.state={highlight:""},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"stopEvent",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"handleDragOver",value:function(e){this.stopEvent(e),this.setHighlight(!0)}},{key:"handleDragIn",value:function(e){this.stopEvent(e),this.setHighlight(!0)}},{key:"handleDragOut",value:function(e){this.stopEvent(e),this.setHighlight(!1)}},{key:"traverseDirectory",value:function(){var e=Object(Q.a)(K.a.mark(function e(t){var n,a,i,r,s,c,l,o,u;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,this.readDirectory(t);case 3:a=e.sent,i=!0,r=!1,s=void 0,e.prev=7,c=a[Symbol.iterator]();case 9:if(i=(l=c.next()).done){e.next=22;break}if(!(o=l.value).isDirectory){e.next=18;break}return e.next=14,this.traverseDirectory(o);case 14:u=e.sent,n=n.concat(u),e.next=19;break;case 18:n=n.concat([o]);case 19:i=!0,e.next=9;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(7),r=!0,s=e.t0;case 28:e.prev=28,e.prev=29,i||null==c.return||c.return();case 31:if(e.prev=31,!r){e.next=34;break}throw s;case 34:return e.finish(31);case 35:return e.finish(28);case 36:return e.abrupt("return",n);case 37:case"end":return e.stop()}},e,this,[[7,24,28,36],[29,,31,35]])}));return function(t){return e.apply(this,arguments)}}()},{key:"readDirectory",value:function(e){return new Promise(function(t,n){e.createReader().readEntries(function(e){t(e)},function(e){n(e)})})}},{key:"handleDrop",value:function(){var e=Object(Q.a)(K.a.mark(function e(t){var n,a,i,r,s,c,l,o,u;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.stopEvent(t),this.setHighlight(!1),n=[],a=!0,i=!1,r=void 0,e.prev=6,s=t.dataTransfer.items[Symbol.iterator]();case 8:if(a=(c=s.next()).done){e.next=22;break}if(l=c.value,!(o=l.webkitGetAsEntry()).isDirectory){e.next=18;break}return e.next=14,this.traverseDirectory(o);case 14:u=e.sent,n=n.concat(u),e.next=19;break;case 18:n=n.concat([o]);case 19:a=!0,e.next=8;break;case 22:e.next=28;break;case 24:e.prev=24,e.t0=e.catch(6),i=!0,r=e.t0;case 28:e.prev=28,e.prev=29,a||null==s.return||s.return();case 31:if(e.prev=31,!i){e.next=34;break}throw r;case 34:return e.finish(31);case 35:return e.finish(28);case 36:if(this.props.handleDrop)try{this.props.handleDrop(n)}catch(t){console.error("error handling Drop event",t)}case 37:case"end":return e.stop()}},e,this,[[6,24,28,36],[29,,31,35]])}));return function(t){return e.apply(this,arguments)}}()},{key:"setHighlight",value:function(e){this.setState(function(t){return Object(f.a)({},t,{highlight:e?"highlight":""})})}},{key:"componentDidMount",value:function(){this.updateCSSVariables($[this.props.theme]);var e=this.dropRef.current;e&&(e.addEventListener("dragenter",this.handleDragIn.bind(this)),e.addEventListener("dragleave",this.handleDragOut.bind(this)),e.addEventListener("dragover",this.handleDragOver.bind(this)),e.addEventListener("drop",this.handleDrop.bind(this)))}},{key:"componentWillUnmount",value:function(){var e=this.dropRef.current;e&&(e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDragOver),e.removeEventListener("drop",this.handleDrop))}},{key:"updateCSSVariables",value:function(e){var t=this;Object.entries(e).forEach(function(e){var n=Object(p.a)(e,2),a=n[0],i=n[1];return t.dropRef.current.style.setProperty(a,i)})}},{key:"render",value:function(){return i.a.createElement("div",{className:"file-drop-wrapper ".concat(this.state.highlight),ref:this.dropRef},i.a.createElement("div",{className:"file-drop ".concat(this.state.highlight)},this.props.children))}}]),t}(a.Component),Z=function(){function e(){Object(c.a)(this,e),this.list=[],this.listeners=[]}return Object(l.a)(e,[{key:"addDeferred",value:function(e){this.list.push(e),this.notify()}},{key:"addListener",value:function(e){this.listeners.push(e),this.notify()}},{key:"notify",value:function(){if(this.listeners.length>0&&this.list.length>0){var e=this.list.shift();this.listeners.shift().execute(e),this.notify()}}}]),e}(),ee=function e(t){var n=this;Object(c.a)(this,e),this.file=t,this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})},te=function(){function e(t){Object(c.a)(this,e),this.queue=t,this.reader=new FileReader}return Object(l.a)(e,[{key:"execute",value:function(){var e=Object(Q.a)(K.a.mark(function e(t){var n=this;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.reader.onload=function(e){t.resolve(e.target.result),n.queue.addListener(n)},this.reader.readAsText(t.file);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),ne=function(){function e(t){Object(c.a)(this,e),this.fileQueue=new Z;for(var n=0;n<t;n++)this.fileQueue.addListener(new te(this.fileQueue))}return Object(l.a)(e,[{key:"readFile",value:function(){var e=Object(Q.a)(K.a.mark(function e(t){var n;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new ee(t),this.fileQueue.addDeferred(n),e.abrupt("return",n.promise);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}();ne.getInstance=function(){return ne.instance||(ne.instance=new ne(6)),ne.instance};var ae=/\r\n|\n/,ie=/\[(.*?)\]/,re=/(.*?)=(.*)/,se=function(e){function t(e){var n,a=e.loadedHandler,i=e.rest;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,i))).profilesLoaded=a,n.profiles={},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"processFile",value:function(){var e=Object(Q.a)(K.a.mark(function e(t){var n,a,i,r,s,c=this;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("credentials"!==t.name&&"config"!==t.name){e.next=13;break}return n=ne.getInstance(),a={credentials:{},options:{}},i="credentials"===t.name?a.credentials:a.options,e.t0=n,e.next=7,new Promise(function(e,n){return t.file(e,n)});case 7:return e.t1=e.sent,e.next=10,e.t0.readFile.call(e.t0,e.t1);case 10:r=e.sent,s=null,r.split(ae).forEach(function(e){var t=ie.exec(e);t&&t[1]&&(s=t[1]);var n=re.exec(e);n&&n[1]&&n[2]&&(i[n[1].trim()]=n[2].trim()),c.profiles[s]={options:Object(f.a)({},c.profiles[s]&&c.profiles[s].options,a.options),credentials:Object(f.a)({},c.profiles[s]&&c.profiles[s].credentials,a.credentials)}});case 13:return e.abrupt("return");case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleDrop",value:function(){var e=Object(Q.a)(K.a.mark(function e(t){var n,a,i=this;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.length>0)){e.next=12;break}for(n=[],a=0;a<t.length;a++)n.push(this.processFile(t[a]));return e.prev=3,e.next=6,Promise.all(n);case 6:this.profilesLoaded&&(Object.entries(this.profiles).forEach(function(e){var t=Object(p.a)(e,2),n=t[0],a=t[1];i.context.dispatch(new T(n,a))}),this.profilesLoaded()),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[3,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement(X,{theme:"light",handleDrop:this.handleDrop.bind(this)},"Drop AWS profile files")}}]),t}(a.Component);se.contextType=w;n(463);var ce=function(e){function t(e){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).call(this,e))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"toggleLeftSide",value:function(){this.context.dispatch(new A({left:"load"===this.context.views.left?"select":"load"}))}},{key:"toggleRightSide",value:function(){this.context.dispatch(new A({right:"role"===this.context.views.right?"filters":"role"}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,this.context.profilesLoaded&&i.a.createElement("div",{className:"aws-section-button-container"},i.a.createElement(S.a,{onClick:this.toggleLeftSide.bind(this),variant:"secondary",className:"aws-section-btn profile-load"},"select"===this.context.views.left?"Load Profiles":"Use Profiles"),i.a.createElement(S.a,{onClick:this.toggleRightSide.bind(this),variant:"secondary",className:"aws-section-btn assume-role"},"filters"===this.context.views.right?"Assume Rule":"Log Filters")),i.a.createElement(O.a,null,i.a.createElement(k.a,{className:"p-0"},"select"===this.context.views.left?this.renderSelectProfile():this.renderLoadProfile()),this.context.profilesLoaded&&i.a.createElement(k.a,{className:"p-0"},"filters"===this.context.views.right?this.renderAWSFiltersSection():this.renderRoleSection())),this.context.profilesLoaded&&i.a.createElement(O.a,{className:"profile-display"},i.a.createElement(k.a,{md:6},i.a.createElement(Y,{profile:this.context.selectedProfile}))))}},{key:"loadedProfilesHandler",value:function(){console.log("loadedProfilesHandler - executing"),this.context.dispatch(new A({left:"select"})),this.context.dispatch(new z(!0))}},{key:"renderRoleSection",value:function(){return i.a.createElement("div",null,"Roles")}},{key:"renderAWSFiltersSection",value:function(){return i.a.createElement("div",null,"AWS LOG Filter Section")}},{key:"renderLoadProfile",value:function(){return i.a.createElement(O.a,{className:"profile-display"},i.a.createElement(k.a,{md:12},i.a.createElement(se,{loadedHandler:this.loadedProfilesHandler.bind(this)})))}},{key:"renderSelectProfile",value:function(){return i.a.createElement(O.a,{className:"profile-display p-0"},i.a.createElement(k.a,{md:6},i.a.createElement(w.Consumer,null,function(e){return i.a.createElement(H,{profiles:e.aws})})),i.a.createElement(k.a,{md:6},i.a.createElement(V,null)))}}]),t}(a.Component);ce.contextType=v;var le=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e){var t=null;try{t=new RegExp(e.target.value.trim())}catch(n){console.error("should probably handle bad input here ",n),this.setState({error:"Invalid Regular Expression."})}t&&(this.setState({error:void 0}),this.context.dispatch(new G(t)))}},{key:"render",value:function(){return i.a.createElement("div",this.props,this.state.error&&i.a.createElement("div",{class:"text-warning"},this.state.error),i.a.createElement(P.a,{className:"",as:"input",type:"text",onChange:this.handleChange.bind(this),placeholder:"regex filter",defaultValue:this.context.filters.regexFilter}))}}]),t}(a.Component);le.contextType=v;var oe=n(481),ue=n(484),he=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).scrollable=e.scrollable,n.scrollRef=i.a.createRef(),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(){this.context.tail&&this.scrollTo()}},{key:"scrollTo",value:function(){var e=this.scrollable&&this.scrollable.current||window;this.scrollRef&&e.scrollTo(0,this.scrollRef.current.offsetTop)}},{key:"render",value:function(){return i.a.createElement("div",{style:{height:"1px"},ref:this.scrollRef})}}]),t}(a.Component);he.contextType=v;n(464);var fe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={showLine:!0,showNumbers:!0},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"groupRender",value:function(e,t,n){return t&&!this.state.showLine?i.a.createElement(O.a,{className:"page-line-row"},Object.values(t.groups).map(function(e){return i.a.createElement(k.a,{md:n},e)})):this.lineRender(e,t,n)}},{key:"captureRender",value:function(e,t,n){return t&&!this.state.showLine?i.a.createElement(O.a,{className:"page-line-row"},t.splice(1,t.length).map(function(e){return i.a.createElement(k.a,{md:n},e)})):this.lineRender(e,t,n)}},{key:"lineRender",value:function(e,t,n){return e}},{key:"showLineHandler",value:function(e){this.setState(Object(f.a)({},this.state,{showLine:e.target.checked}))}},{key:"showNumbersHandler",value:function(e){this.setState(Object(f.a)({},this.state,{showNumbers:e.target.checked}))}},{key:"render",value:function(){var e=this,t=this.context.pagination.page,n=this.context.pagination.pageSize,a=t*n,r=a+n,s=!1,c=[],l=this.lineRender.bind(this),o="auto",u=this.context.page.filter(function(t,n){return e.context.index[n]}).slice(a,r).map(function(t,n){var r=e.context.filters&&e.context.filters.regexFilter&&e.context.filters.regexFilter.exec(t);return 0===n&&r&&r.length>1&&(s=!0,r.groups?(l=e.groupRender.bind(e),(c=Object.keys(r.groups)).length>0&&(o=Math.max(Math.floor(12/c.length),1))):l=e.captureRender.bind(e)),i.a.createElement(O.a,{className:"line-row",key:n},e.state.showNumbers&&i.a.createElement("div",{className:"num-col text-center"},a+n+1),i.a.createElement(k.a,{md:e.state.showNumbers?11:12,className:"page-line"},l(t,r,o)))});return i.a.createElement(oe.a,{fluid:!0},i.a.createElement(O.a,null,u.length>0&&i.a.createElement(ue.a.Check,{inline:!0,label:"numbers",type:"checkbox",id:"showlinecheckbox",checked:this.state.showNumbers,onChange:this.showNumbersHandler.bind(this)}),s&&i.a.createElement(ue.a.Check,{inline:!0,label:"raw",type:"checkbox",id:"showlinecheckbox",checked:this.state.showLine,onChange:this.showLineHandler.bind(this)})),c.length>0&&i.a.createElement(O.a,null,i.a.createElement("div",{className:"num-col text-center"}),i.a.createElement(k.a,{md:11,className:"page-line"},i.a.createElement(O.a,null,c.map(function(e){return i.a.createElement(k.a,{md:o},e)})))),u)}}]),t}(a.Component);fe.contextType=v;var pe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={page:[],filters:[]},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t,n){var a=this,i=!1;if(this.state.page!=this.context.page&&(i=!0),this.state.filters!=this.context.filters&&(i=!0),i){var r=this.context.page.map(function(e){return!a.context.filters||!a.context.filters.regexFilter||a.context.filters.regexFilter.test(e)}),s=r.filter(function(e){return e}),c=this.context.pagination,l=c.page;if(s){var o=Math.ceil(s/c.pageSize);c.page>o&&(l=o)}else l=0;this.context.dispatch(new R(r)),this.context.dispatch(new U({lines:s.length,page:l})),this.setState(function(e){return{page:a.context.page,filters:a.context.filters}})}}},{key:"render",value:function(){return i.a.createElement(fe,null)}}]),t}(a.Component);pe.contextType=v;var de=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"fetchEvents",value:function(){var e=Object(Q.a)(K.a.mark(function e(){var t,n,a,i,r,s,c,l;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.profile,a=t.logGroup,i=n.options.region,r=n.credentials.aws_access_key_id,s=n.credentials.aws_secret_access_key,!r||!s){e.next=18;break}return c=new q(r,s,i),e.prev=6,e.next=9,c.getLogEvents({logGroupName:a,logStreamNamePrefix:"20"});case 9:e.t0=function(e){return e.message},l=e.sent.map(e.t0),console.log("logEvents",l),this.context.dispatch(new N(l)),e.next=18;break;case 15:e.prev=15,e.t1=e.catch(6),console.log(e.t1);case 18:case"end":return e.stop()}},e,this,[[6,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.fetchEvents()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.profile,a=t.logGroup;n&&a&&(n!==e.profile||a!==e.logGroup)&&this.fetchEvents()}},{key:"render",value:function(){return i.a.createElement(pe,null)}}]),t}(a.Component);de.contextType=v;var ve=/\r\n|\n/,ge=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={files:[]},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"processFile",value:function(){var e=Object(Q.a)(K.a.mark(function e(t){var n,a,i;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ne.getInstance(),e.t0=n,e.next=4,new Promise(function(e,n){return t.file(e,n)});case 4:return e.t1=e.sent,e.next=7,e.t0.readFile.call(e.t0,e.t1);case 7:a=e.sent,i=a.split(ve),this.context.dispatch(new N(i));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"processFileDelta",value:function(){var e=Object(Q.a)(K.a.mark(function e(t,n,a){var i,r,s,c;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=ne.getInstance(),e.next=3,new Promise(function(e,n){return t.file(e,n)});case 3:return e.t0=n,e.t1=a,r=e.sent.slice(e.t0,e.t1),e.next=8,i.readFile(r);case 8:s=e.sent,c=s.split(ve),this.context.dispatch(new N(this.context.page.concat(c)));case 11:case"end":return e.stop()}},e,this)}));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"handleDrop",value:function(){var e=Object(Q.a)(K.a.mark(function e(t){var n,a;return K.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],t&&t.length>0){for([],a=0;a<t.length;a++)n.push(t[a]);this.setState({files:n,selectedFile:n[0]}),this.processFile(n[0])}case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"selectFile",value:function(e){var t=this.state.files.filter(function(t){return e.target.value===t.fullPath}).reduce(function(e,t){return t});this.setState({selectedFile:t}),this.processFile(t)}},{key:"tailFile",value:function(e){var t=this;e.file(function(e,n){t.state.fileSize!==e.size&&t.setState({fileSize:e.size})})}},{key:"toggleTail",value:function(e){this.context.dispatch(new _(e.target.checked))}},{key:"componentDidUpdate",value:function(e,t){if(!this.state.tail||!this.state.selectedFile||t&&t.tail&&t.selectedFile&&t.selectedFile===this.state.selectedFile)this.context.tail||this.state.intervalId&&window.clearInterval(this.state.intervalId);else{var n=window.setInterval(this.tailFile.bind(this),500,this.state.selectedFile);this.setState({intervalId:n})}t.fileSize&&t.fileSize!==this.state.fileSize&&(t.fileSize<this.state.fileSize?this.processFileDelta(this.state.selectedFile,t.fileSize,this.state.fileSize):this.processFile(this.state.selectedFile));var a=this.context.pagination;if(a.lines&&this.context.tail){var i=Math.ceil(a.lines/a.pageSize);a.page!==i-1&&this.context.dispatch(new U({page:i-1}))}this.context.tail!==this.state.tail&&this.setState({tail:this.context.tail})}},{key:"componentWillUnmount",value:function(){this.state.intervalId&&window.clearInterval(this.state.intervalId)}},{key:"render",value:function(){return this.state.files.length>0?i.a.createElement(i.a.Fragment,null,i.a.createElement("label",null,"Files"),i.a.createElement(O.a,null,i.a.createElement(k.a,{md:11},i.a.createElement(M.a,{as:"select",onChange:this.selectFile.bind(this),defaultValue:this.state.files[0]},this.state.files.map(function(e){return i.a.createElement("option",{key:e.fullPath,value:e.fullPath},e.fullPath)}))),i.a.createElement(k.a,{md:1},i.a.createElement(ue.a.Check,{type:"checkbox",label:"tail",onChange:this.toggleTail.bind(this),checked:this.context.tail||!1})))):i.a.createElement(X,{theme:"light",handleDrop:this.handleDrop.bind(this)},"Drop file")}}]),t}(a.Component);ge.contextType=v;var me=n(485),be=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(l.a)(t,[{key:"toPage",value:function(e){this.context.dispatch(new _(!1)),this.context.dispatch(new U({page:e-1}))}},{key:"pageSizeChange",value:function(e){this.context.dispatch(new U({pageSize:e.target.value}))}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this,t=this.context.pagination;if(t.lines&&t.pageSize&&t.pageSize>0){var n=Math.ceil(t.lines/t.pageSize),a=t.pageSize,r=t.page+-2;r<0&&(r=0),r>n-5&&(r=n-5);for(var s=[],c=0;c<5;c++)c+r+1>0&&(s[c]=c+r+1);var l=t.page+2>=n?n:t.page+2,o=t.page<1?1:t.page;return i.a.createElement(O.a,null,i.a.createElement(k.a,{md:9},i.a.createElement(me.a,null,i.a.createElement(me.a.First,{onClick:this.toPage.bind(this,1)}),i.a.createElement(me.a.Prev,{onClick:this.toPage.bind(this,o)}),s[0]>1&&i.a.createElement(me.a.Item,{key:1,active:0===t.page,onClick:this.toPage.bind(this,1)},1)||i.a.createElement(i.a.Fragment,null),s[0]>1&&i.a.createElement(me.a.Ellipsis,null)||i.a.createElement(i.a.Fragment,null),s.map(function(n,a){return i.a.createElement(me.a.Item,{key:n,active:n-1===t.page,onClick:e.toPage.bind(e,n)},n)}),s[4]<n&&i.a.createElement(me.a.Ellipsis,null)||i.a.createElement(i.a.Fragment,null),s[4]<n&&i.a.createElement(me.a.Item,{key:n,active:n-1===t.page,onClick:this.toPage.bind(this,n)},n)||i.a.createElement(i.a.Fragment,null),i.a.createElement(me.a.Next,{onClick:this.toPage.bind(this,l)}),i.a.createElement(me.a.Last,{onClick:this.toPage.bind(this,n)}))),i.a.createElement(k.a,{md:1},i.a.createElement("label",null,"Page Size")),i.a.createElement(k.a,{md:2},i.a.createElement(M.a,{className:"",as:"input",size:"sm",type:"number",value:a,onChange:this.pageSizeChange.bind(this)})))}return i.a.createElement(O.a,null,i.a.createElement(k.a,{md:9}),i.a.createElement(k.a,{md:1},i.a.createElement("label",null,"Page Size")),i.a.createElement(k.a,{md:2},i.a.createElement(M.a,{className:"",as:"input",size:"sm",type:"number",value:t.pageSize,onChange:this.pageSizeChange.bind(this)})))}}]),t}(a.Component);be.contextType=v;var ye=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).lastEvent=j,n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){var n=this,a=this.context.aws;a&&JSON.stringify(this.lastEvent)!==JSON.stringify(a)&&(console.log("SYNC AWS",a),this.push(a));var i=a&&Object.keys(a).length>0;i&&this.props.gctx.profilesLoaded!==i&&window.setTimeout(function(){n.props.gctx.dispatch(new A({left:"select"})),n.props.gctx.dispatch(new z(i))},0)}},{key:"storageEventListener",value:function(e){var t=this.lastEvent&&JSON.stringify(this.lastEvent)||null;if("pull_ss_file_filter"===e.key||"push_ss_file_filter"===e.key){var n=e.newValue&&JSON.parse(e.newValue)||null;n&&("pull_ss_file_filter"==e.key&&t?this.push(this.lastEvent):"push_ss_file_filter"==e.key&&e.newValue!==t&&(this.lastEvent=n,this.context.dispatch(new W({aws:n}))))}}},{key:"componentWillMount",value:function(){window.addEventListener("storage",this.storageEventListener.bind(this),!1),this.pull()}},{key:"push",value:function(e){this.lastEvent=e,window.localStorage.setItem("push_ss_file_filter",JSON.stringify(e)),window.setTimeout(function(){window.localStorage.removeItem("push_ss_file_filter")},10)}},{key:"pull",value:function(){window.localStorage.setItem("pull_ss_file_filter","{}"),window.localStorage.removeItem("pull_ss_file_filter")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("storage",this.storageEventListener.bind(this),!1)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null)}}]),t}(a.Component);ye.contextType=w;var Oe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).scrollRef=i.a.createRef(),n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",Object.assign({ref:this.scrollRef},this.props),this.props.children,i.a.createElement(he,{scrollable:this.scrollRef}))}}]),t}(a.Component),ke=(n(465),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={selectedTab:"file"},n}return Object(h.a)(t,e),Object(l.a)(t,[{key:"tabSelect",value:function(e){this.setState({selectedTab:e})}},{key:"render",value:function(){return i.a.createElement(m,null,i.a.createElement(x,null,i.a.createElement(v.Consumer,null,function(e){return i.a.createElement(ye,{gctx:e})}),i.a.createElement("div",{className:"content-holder"},i.a.createElement("header",null,i.a.createElement(b.a,{onSelect:this.tabSelect.bind(this)},i.a.createElement(y.a,{eventKey:"file",title:"File"},i.a.createElement(O.a,null,i.a.createElement(k.a,{md:12},i.a.createElement(ge,null)))),i.a.createElement(y.a,{eventKey:"aws",title:"AWS"},i.a.createElement(ce,null))),i.a.createElement(O.a,null,i.a.createElement(k.a,{md:12},i.a.createElement(le,null))),i.a.createElement(be,null)),i.a.createElement(Oe,{className:"content"},"file"===this.state.selectedTab&&i.a.createElement(pe,null),"aws"===this.state.selectedTab&&i.a.createElement(v.Consumer,null,function(e){return e.profilesLoaded&&e.selectedProfile&&e.selectedGroup&&e.selectedGroup.logGroupName&&i.a.createElement(de,{profile:e.selectedProfile,logGroup:e.selectedGroup.logGroupName})})),i.a.createElement("footer",null))))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},49:function(e,t){},86:function(e,t,n){e.exports=n(477)},91:function(e,t,n){},92:function(e,t,n){}},[[86,1,2]]]);
//# sourceMappingURL=main.e00bb1a0.chunk.js.map