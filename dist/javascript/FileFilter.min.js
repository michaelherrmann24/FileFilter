!function(){APP={NAME:"FileFilter",MODULE:{MAIN:"FF_MAIN",FILE:"FF_FILE",COMMON:"FF_COMMON",NAV:"FF_NAV",FILTER:"FF_FILTER",MENU:"FF_MENU",WORKER:"FF_WORKER"}},angular.element(document).ready(function(){angular.module(APP.NAME,[APP.MODULE.COMMON,APP.MODULE.WORKER,APP.MODULE.MAIN,APP.MODULE.NAV,APP.MODULE.MENU,APP.MODULE.FILE,APP.MODULE.FILTER]),angular.bootstrap(document,[APP.NAME])})}(),function(){"use strict";angular.module(APP.MODULE.COMMON,[])}(),function(){"use strict";angular.module(APP.MODULE.FILE,[])}(),function(){"use strict";angular.module(APP.MODULE.FILTER,[])}(),function(){"use strict";angular.module(APP.MODULE.MAIN,[])}(),function(){"use strict";angular.module(APP.MODULE.MENU,[])}(),function(){"use strict";angular.module(APP.MODULE.NAV,[])}(),function(){"use strict";angular.module(APP.MODULE.WORKER,[])}(),function(){"use strict";angular.module(APP.MODULE.COMMON).constant("SITE",{HTML:{BASE_DIR:"./dist/templates"},WORK_MANAGER:{USE_WORKERS:!0,THREADS:8},FILE:{BUFFER_SIZE:2097152}})}(),function(){"use strict";function a(a,b,c){function d(b){this.file=b,this.fileMapper=new c(b),this.deferred=a.defer(),this.fileMapperExecuteComplete=!1,this.noChunksProcessed=0}return d.prototype.generate=function(){console.debug("generate file map start ",new Date);this.fileMapper.execute().then(this.thenFtn.bind(this),this.errorFtn.bind(this),this.notifyFtn.bind(this));return this.deferred.promise},d.prototype.isComplete=function(){var a=this.fileMapperExecuteComplete&&this.noChunks===this.noChunksProcessed;return a},d.prototype.errorFtn=function(a){return this.deferred.reject(a)},d.prototype.thenFtn=function(a){console.debug("generateFctnThen",new Date),this.noChunks=a.length,this.fileMapperExecuteComplete=!0,this.resolveIfComplete(this.file)},d.prototype.notifyFtn=function(a){this.fileMapper.processChunk(a).then(function(b){this.deferred.notify(b),this.noChunksProcessed=this.noChunksProcessed+1,this.resolveIfComplete(a)}.bind(this))},d.prototype.resolveIfComplete=function(a){this.isComplete()&&(console.debug("generate file map end ",new Date),this.deferred.resolve(a))},d}angular.module(APP.MODULE.COMMON).factory("FileMapGenerator",["$q","$timeout","FileMapper",a])}(),function(){"use strict";function a(a,b,c){function d(d,e){this.fileModel=c.model,this.filter=d,this.filterMapper=new b(this.fileModel,this.filter,e),this.deferred=a.defer(),this.processingComplete=!1,this.noChunksProcessed=0}return d.prototype.generate=function(){return this.filterMapper.execute().then(this.thenFtn.bind(this),this.errorFtn.bind(this),this.notifyFtn.bind(this)),this.deferred.promise},d.prototype.errorFtn=function(a){return console.debug("filter Error",a),this.deferred.reject(a)},d.prototype.thenFtn=function(a){return console.debug("filter Then",a.length,new Date),this.noChunks=a.length,this.processingComplete=!0,this.resolveIfComplete(this.filter),a},d.prototype.notifyFtn=function(a){return this.filterMapper.processChunk(a).then(function(b){return this.deferred.notify(b),this.noChunksProcessed+=1,this.resolveIfComplete(a),b}.bind(this))},d.prototype.isComplete=function(){var a=this.processingComplete&&this.noChunks===this.noChunksProcessed;return a},d.prototype.resolveIfComplete=function(a){this.isComplete()&&(console.debug("generate filter map end ",new Date),this.deferred.resolve(a))},d.prototype.cancel=function(){},d}angular.module(APP.MODULE.COMMON).factory("FilterMapGenerator",["$q","FilterMapper","fileView",a])}(),function(){"use strict";function a(a){function b(a,b){return c(a,b),{pre:d,post:e}}function c(a,b){}function d(a,b,c){}function e(a,b,c){}return{restrict:"E",templateUrl:"./dist/templates/svgIcon.htm",replace:!0,scope:{icon:"@",iconClass:"="},compile:b}}angular.module(APP.MODULE.COMMON).directive("svgIcon",["$document",a])}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"./dist/svg/svg-defs.comb.svg",replace:!0,scope:{}}}angular.module(APP.MODULE.COMMON).directive("svgInclude",[a])}(),function(){function a(a){return function(d){if(angular.isDefined(d)&&!isNaN(d)){for(var e=0,f=1;d/f>1;)f*=c,e++;var g=d/(f/c);return a("number")(g,2)+" "+b[e-1]}return d}}angular.module(APP.MODULE.FILE).filter("fileSizeFilter",["$filter",a]);var b=["B","KB","MB","GB","TB"],c=1024}(),function(){"use strict";function a(a,b,c,d){return{restrict:"E",templateUrl:d.HTML.BASE_DIR+"/fileContent.htm",replace:!0,scope:{},link:function(c,d,e){c.pageView=b,c.fileView=a}}}angular.module(APP.MODULE.FILE).directive("fileContent",["fileView","pageView","FiltersView","SITE",a])}(),function(){function a(a,b){function c(b,c,d){b.fileView=a}return{restrict:"E",templateUrl:b.HTML.BASE_DIR+"/fileDetails.htm",replace:!0,transclude:!0,scope:{},controller:["$scope","$element","$attrs",c],controllerAs:"fileDetailsCtrl"}}angular.module(APP.MODULE.FILE).directive("fileDetails",["fileView","SITE",a])}(),function(){"use strict";function a(a,b){return{restrict:"E",replace:!0,templateUrl:b.HTML.BASE_DIR+"/fileLine.htm",link:function(b,c,d){a.model.readLine(b.line).then(function(a){b.lineContent=a,b.lineNo=b.line.row})}}}angular.module(APP.MODULE.FILE).directive("fileLine",["fileView","SITE",a])}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(h,i,j){function k(a){a.stopPropagation(),a.preventDefault(),a.dataTransfer.dropEffect="copy"}function l(i){i.stopPropagation(),i.preventDefault(),a.model=new c(i.dataTransfer.files[0]),b.model=new d,f.model=new g,h.$applyAsync(),new e(a.model).generate().then(function(b){a.model=b},function(a){console.debug("error",a)},function(a){b.model.totalLines=a.length})["finally"](function(){h.$applyAsync()})}i.bind("dragover",k),i.bind("drop",l)}return{restrict:"A",scope:{type:"@fileSelect"},controller:["$scope","$element","$attrs","$timeout",h],controllerAs:"fileSelectCtrl"}}angular.module(APP.MODULE.FILE).directive("fileSelect",["fileView","pageView","FileModel","Page","FileMapGenerator","FiltersView","Filters",a])}(),function(){"use strict";function a(a,b,c){function d(a,b,d){this.start=a,this.end=b,this.file=d,this.firstLine,this.lastLine,this.lines=[],this.reader=new c(d),this.deferred,this.index}return d.prototype.serialize=function(){return{executable:"ChunkMapper",parameters:[this.start,this.end,this.file],properties:{index:this.index,firstLine:this.firstLine,lastLine:this.lastLine,lines:this.lines}}},d.prototype.execute=function(){return this.deferred=a.defer(),this.reader.readBytes(this.start,this.end).then(this.mapChunk.bind(this)),this.deferred.promise},d.prototype.cancel=function(){this.deferred.reject("CANCELLED")},d.prototype.mapChunk=function(a){for(var c=new Uint8Array(a),d=this.start,e=0;e<c.length;e++)if(10===c[e]){var f=this.start+e;if(this.firstLine){var g=new b(d,f,!0);this.lines.push(g)}else this.firstLine=new b(d,f,!0);d=f+1}d<this.start+c.length&&(this.lastLine=new b(d,this.start+c.length,!1)),this.deferred.resolve(this)},d}angular.module(APP.MODULE.FILE).factory("ChunkMapper",["$q","Line","fileReaderSrvc",a])}(),function(){"use strict";function a(a,b,c){function d(a){var b=0;this.fileModel=a,this.observers=[],Object.defineProperty(this,"currentIndex",{get:function(){return b},set:function(a){b=a,this._triggerObserver()}})}function e(a,b){var c=a;c.row=b.lines.length+1,b.lines.push(c)}function f(a,b){return!a.hasLineFeed}function g(a,b){return new c(a.start,b.end,b.hasLineFeed)}function h(a,b,c){this.processor=b,this.deferred=c,this.chunk=a}return d.prototype.processChunk=function(b){var c=a.defer();0===b.index&&console.debug("first chunk notify",new Date);var d=new h(b,this,c);return this.observers[b.index]=d,this._triggerObserver(),c.promise},d.prototype._triggerObserver=function(){var a=this.observers[this.currentIndex];a&&a.process()},d.prototype._processChunk=function(a,b){var c=b,d=a;if(0===this.fileModel.lines.length)e(d.firstLine,this.fileModel);else if(f(this.fileModel.lines[this.fileModel.lines.length-1],d.firstLine)){var h=g(this.fileModel.lines.pop(),d.firstLine);e(h,this.fileModel)}var i=this.fileModel;d.lines.forEach(function(a){e(a,i)}),d.lastLine&&e(d.lastLine,this.fileModel),this.currentIndex++,c.resolve(this.fileModel.lines)},h.prototype.process=function(){delete this.processor.observers[this.chunk.index],this.processor._processChunk(this.chunk,this.deferred)},d}angular.module(APP.MODULE.FILE).factory("ChunkProcessor",["$q","$timeout","Line",a])}(),function(){"use strict";function a(a,b,c,d,e){function f(a){this.fileModel=a,this.file=a.file,this.processor=new e(a)}return f.prototype.execute=function(){var a=this.seperateIntoChunks();return c.execute(a).then(function(a){return a})},f.prototype.seperateIntoChunks=function(){for(var a=[],c=0;c<this.file.size;){var e=Math.min(this.file.size,c+b.FILE.BUFFER_SIZE);a.push(new d(c,e,this.file)),a[a.length-1].index=a.length-1,c=e+1}return a},f.prototype.processChunk=function(a){return this.processor.processChunk(a)},f}angular.module(APP.MODULE.FILE).factory("FileMapper",["$q","SITE","WorkManager","ChunkMapper","ChunkProcessor",a])}(),function(){"use strict";function a(a,b){function c(a){this.file=a,this.fileReader=new b(a),this.lines=[]}return c.prototype.readLine=function(a){return this.fileReader.read(a.start,a.end)},c}angular.module(APP.MODULE.FILE).factory("FileModel",["$q","fileReaderSrvc",a])}(),function(){"use strict";function a(){function a(a,b,c){this.row,this.start=a,this.end=b,this.hasLineFeed=c}return a}angular.module(APP.MODULE.FILE).factory("Line",[a])}(),function(){"use strict";function a(a){function b(a){this.file=a}function c(a,b){return function(){b.resolve(a.result)}}function d(a,b){return function(){b.reject(a.result)}}function e(a){var b=new FileReader;return b.onload=c(b,a),b.onerror=d(b,a),b}return b.prototype.readBytes=function(b,c){var d=a.defer(),f=e(d);return f.readAsArrayBuffer(this.file.slice(b,c)),d.promise},b.prototype.read=function(b,c){var d=a.defer(),f=e(d);return f.readAsText(this.file.slice(b,c)),d.promise},b}angular.module(APP.MODULE.FILE).factory("fileReaderSrvc",["$q",a])}(),function(){"use strict";function a(){var a;Object.defineProperty(this,"model",{configurable:!1,enumerable:!1,get:function(){return a},set:function(b){a=b}})}angular.module(APP.MODULE.FILE).service("fileView",[a])}(),function(){"use strict";function a(a){function b(a,b,c){}function c(a,b,c){console.debug("filter directive link",a.filter)}return{restrict:"E",templateUrl:"./templates/filters/filter.htm",replace:!0,scope:{filter:"=fltr"},controller:["$scope","$element","$attrs",c],controllerAs:"filterCtrl",link:b}}angular.module(APP.MODULE.FILTER).directive("ffFilter",["$timeout",a])}(),function(){"use strict";function a(a){function b(a,b,c){console.debug("filter group directive link",a.group)}function c(b,c,d){this.removeGroup=function(){a.model.removeGroup(b.group)}}return{restrict:"E",templateUrl:"./templates/filters/filterGroup.htm",replace:!0,scope:{group:"=group"},controller:["$scope","$element","$attrs",c],controllerAs:"filterGroupCtrl",link:b}}angular.module(APP.MODULE.FILTER).directive("ffFilterGroup",["FiltersView",a])}(),function(){"use strict";function a(a){function b(a,b,c){}return{restrict:"E",templateUrl:"./templates/filters/filters.htm",replace:!0,scope:{},controller:["$scope","$element","$attrs",b],controllerAs:"filtersCtrl",link:function(b,c,d){b.view=a}}}angular.module(APP.MODULE.FILTER).directive("ffFilters",["FiltersView",a])}(),function(){"use strict";function a(a,b){function c(b){var c="";this.generator,this.id=d++,this.index=b,this.type,this.filterMap=[],this.opt=0,Object.defineProperty(this,"value",{configurable:!1,enumerable:!0,get:function(){return c},set:function(b){c=b,e&&a.cancel(e),e=a(function(){e=null,"undefined"==typeof c||null===c||""===c.trim()?(console.debug("defaulting filter map"),this.filterMap=[]):(this.opt++,this._generateFilterMap(this.opt))}.bind(this),f)}})}var d=0,e=null,f=500;return c.prototype._generateFilterMap=function(a){"undefined"!=typeof this.generator&&null!=this.generator&&this.generator.cancel(),this.generator=new b(this,a),this.generator.generate()},c.prototype.isVisible=function(a){if(a>=this.filterMap.length)return!0;var b=this.filterMap[a];return b},c}angular.module(APP.MODULE.FILTER).factory("Filter",["$timeout","FilterMapGenerator",a])}(),function(){"use strict";function a(a,b,c,d){function e(a,b){var c=0;this.filter=a,this.opt=b,this.observers=[],Object.defineProperty(this,"currentIndex",{get:function(){return c},set:function(a){c=a,this._triggerObserver()}})}function f(a,b,c){this.processor=b,this.deferred=c,this.chunk=a}return e.prototype.processChunk=function(b){var c=a.defer();0===b.index&&(console.debug("first filterd chunk notify",new Date),this.filter.filterMap=[]);var d=new f(b,this,c);return this.observers[b.index]=d,this._triggerObserver(),c.promise},e.prototype._triggerObserver=function(){var a=this.observers[this.currentIndex];a&&a.process()},e.prototype._processChunk=function(a,b){this.opt===this.filter.opt?(this.filter.filterMap=this.filter.filterMap.concat(a.result),b.resolve(this.filter.filterMap)):b.reject("newer process running"),this.currentIndex++},f.prototype.process=function(){delete this.processor.observers[this.chunk.index],this.processor._processChunk(this.chunk,this.deferred)},e}angular.module(APP.MODULE.FILE).factory("FilterChunkPostProcessor",["$q","$timeout","Line","FiltersView",a])}(),function(){"use strict";function a(a,b){function c(a,b,c,d){this.start=a,this.end=b,this.file=c,this.filterValue=d,this.result=[],this.deferred,this.index}return c.prototype.serialize=function(){return delete this.deferred,{executable:"FilterChunkProcessor",parameters:[this.start,this.end,this.file,this.filterValue],properties:{index:this.index,result:this.result}}},c.prototype.execute=function(){this.deferred=a.defer();var c=new b(this.file);return c.read(this.start,this.end).then(this.mapChunk.bind(this)),this.deferred.promise},c.prototype.cancel=function(){this.deferred.reject("CANCELLED")},c.prototype.mapChunk=function(a){this.result=a.split(/\r\n|\n/).map(this.isVisible.bind(this)),this.deferred.resolve(this)},c.prototype.isVisible=function(a){return-1!==a.search(this.filterValue)},c}angular.module(APP.MODULE.FILTER).factory("FilterChunkProcessor",["$q","fileReaderSrvc",a])}(),function(){"use strict";function a(a){function b(b){this.index=b,this.filters=[new a(0)]}return b.prototype.addFilter=function(){this.filters.push(new a(this.filters.length))},b.prototype.removeFilter=function(a){this.filters.splice(a.index,1)},b.prototype.isVisible=function(a){if("undefined"==typeof this.filters||0===this.filters.length)return!0;for(var b=0;b<this.filters.length;b++)if(!this.filters[b].isVisible(a))return!1;return!0},b}angular.module(APP.MODULE.FILTER).factory("FilterGroup",["Filter",a])}(),function(){"use strict";function a(a,b,c,d,e){function f(a,b,c){this.fileModel=a,this.filter=b,this.processor=new e(this.filter,c)}return f.prototype.execute=function(){var a=this.seperateIntoChunks();return c.execute(a)},f.prototype.seperateIntoChunks=function(){for(var a=[],c=0,e=b.FILE.BUFFER_SIZE,f=0;f<this.fileModel.lines.length;f++)this.fileModel.lines[f].end>e?(a.push(new d(c,this.fileModel.lines[f-1].end,this.fileModel.file,this.filter.value)),a[a.length-1].index=a.length-1,c=this.fileModel.lines[f].start,e=c+b.FILE.BUFFER_SIZE):f===this.fileModel.lines.length-1&&(a.push(new d(c,this.fileModel.lines[f].end,this.fileModel.file,this.filter.value)),a[a.length-1].index=a.length-1);return a},f.prototype.processChunk=function(a){return this.processor.processChunk(a)},f}angular.module(APP.MODULE.FILTER).factory("FilterMapper",["$q","SITE","WorkManager","FilterChunkProcessor","FilterChunkPostProcessor",a])}(),function(){"use strict";function a(a){function b(){this.groups=[new a(0)]}return b.prototype.addGroup=function(){this.groups.push(new a(this.groups.length))},b.prototype.removeGroup=function(a){this.groups.splice(a.index,1)},b.prototype.isVisible=function(a){if("undefined"==typeof this.groups||0===this.groups.length)return!0;for(var b=0;b<this.groups.length;b++)if(this.groups[b].isVisible(a))return!0;return!1},b}angular.module(APP.MODULE.FILTER).factory("Filters",["FilterGroup",a])}(),function(){"use strict";function a(a,b){function c(c){function d(b,c){var d=a.model.isVisible(c);return d}if("undefined"==typeof a.model)return c;var e=c.filter(d);return b.model.totalLines=e.length,e}return c}angular.module(APP.MODULE.FILTER).filter("PageContent",["FiltersView","pageView",a])}(),function(){"use strict";function a(a,b){function c(a){function c(a,c){var d=b.model.isVisible(c);return d}if("undefined"==typeof b.model)return lineList.length;var d=lineList.filter(c).reduce(d);return filteredList}return c}angular.module(APP.MODULE.FILTER).filter("VisibleLines",["fileView","FiltersView",a])}(),function(){"use strict";function a(){this.model,this.visible=!1}angular.module(APP.MODULE.FILTER).service("FiltersView",[a]),a.prototype.toggleVisible=function(){this.visible=!this.visible}}(),function(){"use strict";function a(a,b){this.model=b}var b=angular.module(APP.MODULE.MAIN);b.controller("mainController",["$scope","mainModel",a])}(),function(){"use strict";function a(){function a(){this.fileModel,this.filterModel,this.pageModel}return a.prototype.setFileModel=function(a){this.fileModel=a},a.prototype.setFilterModel=function(a){this.filteredFileModel=fileModel},a.prototype.setPageModel=function(a){this.pageModel=a},a.prototype.getFileModel=function(){return this.fileModel},new a}angular.module(APP.MODULE.MAIN).service("mainModel",[a])}(),function(){"use strict";function a(a){function b(a,b,c){}return{restrict:"E",templateUrl:a.HTML.BASE_DIR+"/menu.htm",replace:!0,scope:{},controller:["$scope","$element","$attrs",b],controllerAs:"menuCtrl"}}angular.module(APP.MODULE.MENU).directive("menu",["SITE",a])}(),function(){"use strict";function a(a,b){function c(){}return c.getMenuOption=function(c,d){console.debug("getMenuOption",c,d);var e;switch(d.menuSelector){case"filter":e=new b(c,d);break;default:e=new a(c,d)}return e},c}angular.module(APP.MODULE.MENU).service("MenuOptionFactory",["MenuOption","FilterOption",a])}(),function(){"use strict";function a(a,b){function c(b,c){return a.call(this,b,c)}return c.prototype=Object.create(a.prototype),c.prototype.constructor=c,c.prototype.compile=function(b,c){a.prototype.compile.apply(this,[b,c])},c.prototype.preLink=function(b,c,d){a.prototype.preLink.apply(this,[b,c,d])},c.prototype.postLink=function(c,d,e){a.prototype.postLink.apply(this,[c,d,e]),d.bind("click",function(a){b.toggleVisible()})},c}angular.module(APP.MODULE.NAV).factory("FilterOption",["MenuOption","FiltersView",a])}(),function(){"use strict";function a(){function a(a,b){return this.compile(a,b),{pre:this.preLink,post:this.postLink}}return a.prototype.compile=function(a,b){},a.prototype.preLink=function(a,b,c){},a.prototype.postLink=function(a,b,c){a.selected=!1,b.bind("click",function(b){a.selected=!a.selected,a.$applyAsync()})},a}angular.module(APP.MODULE.NAV).factory("MenuOption",[a])}(),function(){"use strict";function a(a){return{restrict:"A",compile:a.getMenuOption}}angular.module(APP.MODULE.MENU).directive("menuSelector",["MenuOptionFactory",a])}(),function(){"use strict";function a(){return{restrict:"A",require:"^^pagination",link:function(a,b,c,d){b.bind("click",d.first)}}}angular.module(APP.MODULE.NAV).directive("first",a)}(),function(){"use strict";function a(){return{restrict:"A",require:"^^pagination",link:function(a,b,c,d){b.bind("click",d.last)}}}angular.module(APP.MODULE.NAV).directive("last",a)}(),function(){"use strict";function a(){return{restrict:"A",require:"^^pagination",link:function(a,b,c,d){b.bind("click",d.next)}}}angular.module(APP.MODULE.NAV).directive("next",a)}(),function(){"use strict";function a(a,b,c){function d(c,d,e){function f(a,c){a!=c&&(b.model.totalLines=a)}function g(){return angular.isDefined(a.model)&&angular.isDefined(a.model.displayMap)?a.model.displayMap.length:0}c.pageView=b;e.scrollTo;this.next=function(){b.model.currentPage<b.model.totalPages&&(b.model.currentPage++,c.$apply())},this.prev=function(){b.model.currentPage>1&&(b.model.currentPage--,c.$apply())},this.first=function(){b.model.currentPage=1,c.$apply()},this.last=function(){b.model.currentPage=b.model.totalPages,c.$apply()},c.$watch(g,f)}return{restrict:"E",templateUrl:c.HTML.BASE_DIR+"/pagination.htm",replace:!0,scope:{},controller:["$scope","$element","$attrs",d],controllerAs:"pagingCtrl"}}angular.module(APP.MODULE.NAV).directive("pagination",["fileView","pageView","SITE",a])}(),function(){"use strict";function a(a,b){return{restrict:"E",templateUrl:b.HTML.BASE_DIR+"/pagingDetails.htm",replace:!0,scope:{},link:function(b){b.pageView=a}}}angular.module(APP.MODULE.NAV).directive("pagingDetails",["pageView","SITE",a])}(),function(){"use strict";function a(){return{restrict:"A",require:"^^pagination",link:function(a,b,c,d){b.bind("click",d.prev)}}}angular.module(APP.MODULE.NAV).directive("prev",a)}(),function(){"use strict";function a(){function a(){Object.defineProperty(this,"currentPage",{configurable:!1,enumerable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"linesPerPage",{configurable:!1,enumerable:!1,get:function(){return h},set:function(a){h=a,e=1,f=b()}}),Object.defineProperty(this,"totalLines",{configurable:!1,enumerable:!1,get:function(){return g},set:function(a){g=a,f=b()}}),Object.defineProperty(this,"totalPages",{configurable:!1,enumerable:!1,get:function(){return f}})}function b(){if(!isNaN(h)&&!isNaN(g)){var a=Math.max(h,1),b=Math.ceil(g/a);return Math.max(b,1)}return 1}var c=200,d=1,e=1,f=d,g=0,h=c;return a}angular.module(APP.MODULE.NAV).factory("Page",[a])}(),function(){"use strict";function a(){var a;Object.defineProperty(this,"model",{configurable:!1,enumerable:!1,get:function(){return a},set:function(b){a=b}})}angular.module(APP.MODULE.NAV).service("pageView",[a])}(),function(){"use strict";function a(a,b){b.setPoolSize(a.WORK_MANAGER.THREADS),b.useWorker(a.WORK_MANAGER.USE_WORKERS)}angular.module(APP.MODULE.WORKER).config(["SITE","WorkManagerProvider",a])}(),function(){"use strict";function a(){function a(a){d=a>0?a:1}function b(a){e=a}function c(a,b,c,f,g){function h(){this.pool=new c}function i(b,c){var d,e,f=b,g=c,h=function(){return g.pool.getWorker()},i=function(a){return d=a,d.execute(f)},j=function(a){e.resolve(a)},k=function(){g.pool.returnWorker(d)};this.execute=function(){return e=a.defer(),h().then(i).then(j).then(k),e.promise}}return h.prototype.initialise=function(){for(var a=this.pool,b=0;d>b;b++)!function(b){b.initialise().then(function(){a.returnWorker(b)})}(e?new g:new f)},h.prototype.execute=function(b){var c=a.defer(),d=[];return b.forEach(function(a){var b=new i(a,this).execute().then(function(a){return c.notify(a),a});d.push(b)}.bind(this)),a.all(d).then(function(a){c.resolve(a)}),c.promise},h.prototype.terminate=function(){},new h}var d=1,e=!1;return{setPoolSize:a,useWorker:b,$get:["$q","$timeout","WorkerPool","FFLocalWorker","FFWorker",c]}}angular.module(APP.MODULE.WORKER).provider("WorkManager",[a])}(),function(){"use strict";function a(a){a.initialise()}angular.module(APP.MODULE.WORKER).run(["WorkManager",a])}(),function(){"use strict";function a(a,b,c){function d(){var b=e;e++;var d,f=!1;this.getIdentifier=function(){return b},this.initialise=function(){var b=a.defer(),e=c.template(),f=new Blob([e],{type:"application/javascript"}),g=window.URL.createObjectURL(f),h=function(a){var c=a.data.event;"initDone"===c?b.resolve("worker initialized"):b.reject(a),window.URL.revokeObjectURL(g)};return d=new Worker(g),d.onmessage=h,b.promise},this.execute=function(b){if(f)return a.reject("Worker is locked by another process");var c=a.defer(),e=b.serialize(),g=function(a){var d=a.data,e=a.data.event;switch(e){case"initDone":c.reject(a);break;case"success":for(var g in d.data.properties)b[g]=d.data.properties[g];c.resolve(b);break;case"notify":c.notify(d.data);break;case"error":c.reject(a);break;default:console.debug("rejecting worker execute - unknow msg from worker"),c.reject(a)}f=!1};return d.onmessage=g,d.postMessage(e),c.promise},this.terminate=function(){d&&d.terminate()}}var e=0;return d}angular.module(APP.MODULE.WORKER).factory("FFWorker",["$q","$timeout","WorkerTemplate",a])}(),function(){"use strict";function a(a,b){function c(){var b=d;d++;var c=!1;this.getIdentifier=function(){return b},this.initialise=function(){return a.when("worker initialized")},this.execute=function(b){if(c)return a.reject("Worker is locked by another process");var d=a.defer();return b.execute().then(function(a){d.resolve(b)}.bind(this)),d.promise},this.terminate=function(){}}var d=0;return c}angular.module(APP.MODULE.WORKER).factory("FFLocalWorker",["$q","$timeout",a])}(),function(){"use strict";function a(a,b){function c(){this.pool=[],this.queue=[],this.terminate=!1}return c.prototype.getWorker=function(){var b=a.defer();return this.queue.push(b),this.notifyQueued(),b.promise},c.prototype.returnWorker=function(a){this.pool.push(a),this.notifyPooled()},c.prototype.notifyQueued=function(){this.resolveRequest()},c.prototype.notifyPooled=function(){this.resolveRequest()},c.prototype.resolveRequest=function(){if(this.terminate)this._termiante();else if(this.queue.length>0&&this.pool.length>0){var a=this.queue.shift(),b=this.pool.pop();a.resolve(b)}},c.prototype.terminate=function(){this.terminate=!0},c.prototype._terminate=function(){this.queue.forEach(function(a){a.reject("terminated")}.bind(this)),this.queue=[],this.pool.forEach(function(a){a.termiante()}.bind(this)),this.pool=[]},c}angular.module(APP.MODULE.WORKER).factory("WorkerPool",["$q","$timeout",a])}(),function(){"use strict";function a(a){return["","APP = {","NAME: 'Worker',","MODULE: {","FILE : 'FF_FILE',","FILTER : 'FF_FILTER',","COMMON : 'FF_COMMON',","FILTER : 'FF_FILTER',","WORKER : 'FF_WORKER'","}","};","var window = self;","self.history = {};","var document = {","readyState: 'complete',","cookie: '',","querySelector: function () {},","createElement: function () {","return {","pathname: '',","setAttribute: function () {}","};","}","};","importScripts('"+a+"dist/lib/ng.min.js');","importScripts('"+a+"dist/javascript/Worker.min.js');","angular = window.angular;","angular.module(APP.NAME,[APP.MODULE.WORKER,APP.MODULE.FILE,APP.MODULE.FILTER]);","angular.bootstrap(null, [APP.NAME]);"].join("")}function b(b){function c(){var c=a(b.absUrl());return c}return{template:c}}angular.module(APP.MODULE.WORKER).service("WorkerTemplate",["$location",b])}();
//# sourceMappingURL=FileFilter.min.js.map