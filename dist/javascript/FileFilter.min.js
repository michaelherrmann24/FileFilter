!function(){APP={NAME:"FileFilter",MODULE:{MAIN:"FF_Main",FILE:"FF_File",COMMON:"FF_Common",NAV:"FF_Nav",FILTERS:"FF_Filters",MENU:"FF_MENU"}},angular.element(document).ready(function(){angular.module(APP.NAME,[APP.MODULE.MAIN,APP.MODULE.FILE,APP.MODULE.COMMON,APP.MODULE.NAV,APP.MODULE.MENU,APP.MODULE.FILTERS]),angular.bootstrap(document,[APP.NAME])})}(),function(){"use strict";angular.module(APP.MODULE.COMMON,[])}(),function(){"use strict";angular.module(APP.MODULE.FILE,[])}(),function(){"use strict";angular.module(APP.MODULE.FILTERS,[])}(),function(){"use strict";angular.module(APP.MODULE.MAIN,[])}(),function(){"use strict";angular.module(APP.MODULE.MENU,[])}(),function(){"use strict";angular.module(APP.MODULE.NAV,[])}(),function(){"use strict";angular.module(APP.MODULE.COMMON).constant("SITE",{HTML:{BASE_DIR:"./dist/templates"}})}(),function(){"use strict";function a(a){function b(a,b){return c(a,b),{pre:d,post:e}}function c(a,b){console.debug("compile",a,b)}function d(a,b,c){console.debug("pre link",a,b,c)}function e(a,b,c){console.debug("post link",a,b,c)}return{restrict:"E",templateUrl:"./dist/templates/svgIcon.htm",replace:!0,scope:{icon:"@",iconClass:"="},compile:b}}angular.module(APP.MODULE.COMMON).directive("svgIcon",["$document",a])}(),function(){"use strict";function a(){return{restrict:"E",templateUrl:"./dist/svg/svg-defs.comb.min.svg",replace:!0,scope:{}}}angular.module(APP.MODULE.COMMON).directive("svgInclude",[a])}(),function(){"use strict";function a(a,b,c){return{restrict:"E",templateUrl:c.HTML.BASE_DIR+"/fileContent.htm",replace:!0,scope:{},link:function(c,d,e){c.pageView=b,c.fileView=a}}}angular.module(APP.MODULE.FILE).directive("fileContent",["fileView","pageView","SITE",a])}(),function(){function a(a,b){function c(b,c,d){b.fileView=a}return{restrict:"E",templateUrl:b.HTML.BASE_DIR+"/fileDetails.htm",replace:!0,transclude:!0,scope:{},controller:["$scope","$element","$attrs",c],controllerAs:"fileDetailsCtrl"}}angular.module(APP.MODULE.FILE).directive("fileDetails",["fileView","SITE",a])}(),function(){"use strict";function a(a,b){function c(a){this.file=a,this.fileReader,this.fileMap=[]}function d(a,b){return a<b.file.size?b.fileReader.read(a,a+f).then(function(c){for(var e=c,f=a;e.length>0;){var g=e.indexOf("\n");if(-1==g){if(f+e.length===b.file.size){var h={start:f,end:b.file.size};f=f+e.length+1,b.fileMap.push(h)}break}var h={start:f,end:f+g};f=f+g+1,b.fileMap.push(h),e=e.length-1<g+1?"":e.substring(g+1,e.length-1)}return d(f,b)},e):void console.debug("file finished.",b)}function e(a){console.error("Error Generating File Map",a)}var f=10485760;return c.prototype.generateFileMap=function(){console.debug("generating file Map",this);return this.fileReader=b.newInstance(this.file),d(0,this)},c.prototype.readLine=function(a){return this.fileReader.read(a.start,a.end)},c.newInstance=function(a){return new c(a)},c}angular.module(APP.MODULE.FILE).service("fileFactory",["$q","fileReaderSrvc",a])}(),function(){"use strict";function a(a,b){return{restrict:"A",link:function(b,c,d){a.model.readLine(b.line).then(function(a){b.lineContent=a})}}}angular.module(APP.MODULE.FILE).directive("fileLine",["fileView","SITE",a])}(),function(){"use strict";function a(a){function b(a){this.file=a}function c(a,b){return function(){b.resolve(a.result)}}function d(a,b){return function(){b.reject(a.result)}}function e(a){var b=new FileReader;return b.onload=c(b,a),b.onerror=d(b,a),b}return b.prototype.readBytes=function(b,c){var d=a.defer(),f=e(d);return f.readAsArrayBuffer(this.file.slice(b,c)),d.promise},b.prototype.read=function(b,c){var d=a.defer(),f=e(d);return f.readAsText(this.file.slice(b,c)),d.promise},b.newInstance=function(a){return new b(a)},b}angular.module(APP.MODULE.FILE).service("fileReaderSrvc",["$q",a])}(),function(){"use strict";function a(a,b,c,d,e){function f(a,f,g){function h(a){a.stopPropagation(),a.preventDefault(),a.dataTransfer.dropEffect="copy"}function i(f){f.stopPropagation(),f.preventDefault(),b.model=d.newInstance(f.dataTransfer.files[0]),b.model.generateFileMap(),c.model=e.newInstance(b.model),a.$apply()}f.bind("dragover",h),f.bind("drop",i)}return{restrict:"A",scope:{type:"@fileSelect"},controller:["$scope","$element","$attrs",f],controllerAs:"fileSelectCtrl"}}angular.module(APP.MODULE.FILE).directive("fileSelect",["$timeout","fileView","pageView","fileFactory","pageFactory",a])}(),function(){function a(a){return function(d){if(angular.isDefined(d)&&!isNaN(d)){for(var e=0,f=1;d/f>1;)f*=c,e++;var g=d/(f/c);return a("number")(g,2)+" "+b[e-1]}return d}}angular.module(APP.MODULE.FILE).filter("fileSizeFilter",["$filter",a]);var b=["B","KB","MB","GB","TB"],c=1024}(),function(){"use strict";function a(){var a;Object.defineProperty(this,"model",{configurable:!1,enumerable:!1,get:function(){return a},set:function(b){a=b}})}angular.module(APP.MODULE.FILE).service("fileView",[a])}(),function(){"use strict";function a(a){function b(a){}return b.getFilter=function(a){},b}angular.module(APP.MODULE.FILTERS).service("filterFactory",["$q",a])}(),function(){"use strict";function a(){function a(a){var b;this.parent=a,this.fileMap,Object.defineProperty(this,"filter",{configurable:!1,enumerable:!1,get:function(){return b},set:function(a){b=a}})}return a.prototype.addFilter=function(a){this.filter=a},a.prototype.removeFilter=function(a){a&&(this.filter=a.filter,generateFileMap(parent.fileMap))},a.prototype.generateFileMap=function(a){filter&&filter.generateFileMap(this.fileMap)},a.prototype.getFileMap=function(){return filter?filter.getFileMap():this.fileMap},a.prototype.notifyParent=function(){this.parent&&this.parent instanceof a&&this.parent.notifyParent()},a}angular.module(APP.MODULE.FILTERS).service("baseFilter",[a])}(),function(){"use strict";function a(a,b){function c(a){b.call(this,[a]),this.orFilterIndex=0,this.filter={}}return c.prototype=Object.create(b.prototype),c.prototype.constructor=c,c.prototype.generateFileMap=function(){for(var a in this.filter);},c.prototype.addFilter=function(a){a.orIndex=this.orFilterIndex,this.filter[this.orFilterIndex]=a,this.orFilterIndex++},c.prototype.removeFilter=function(a){delete this.filter[a.orIndex]},c.prototype.getFileMap=function(){return this.fileMap},c.prototype.notifyParent=function(){this.generateFileMap(),b.prototype.notifyParent.apply(this,[])},c}angular.module(APP.MODULE.FILTERS).factory("abstractFilter",["$q","baseFilter",a])}(),function(){"use strict";function a(a){function b(b,c,d){this.view=a}return{restrict:"E",templateUrl:"./templates/filters.htm",replace:!0,scope:{},controller:["$scope","$element","$attrs",b],controllerAs:"filteCrtrl"}}angular.module(APP.MODULE.FILTERS).directive("filters",["filtersView",a])}(),function(){"use strict";function a(){var a,b=!1;return Object.defineProperty(this,"model",{configurable:!1,enumerable:!1,get:function(){return a},set:function(b){a=b}}),Object.defineProperty(this,"visible",{configurable:!1,enumerable:!1,get:function(){return b},set:function(a){b=a}}),this}angular.module(APP.MODULE.FILTERS).service("filtersView",[a]),a.prototype.toggleVisible=function(){this.visible=!this.visible}}(),function(){"use strict";function a(a,b){this.model=b,a.countDigests=function(){},a.$watch("countDigests()")}var b=angular.module(APP.MODULE.MAIN);b.controller("mainController",["$scope","mainModel",a])}(),function(){"use strict";function a(){function a(){this.fileModel,this.filteredFileManager}return a.prototype.setFileModel=function(a){this.fileModel=a,this.fileModel.generateFileMap()},a.prototype.setFilteredFileModel=function(a){this.filteredFileModel=a,this.fileModel.generateFileMap()},a.prototype.setPageModel=function(a){this.pageModel=a},a.prototype.getFileModel=function(){return this.fileModel},new a}angular.module(APP.MODULE.MAIN).service("mainModel",[a])}(),function(){"use strict";function a(a){function b(a,b,c){}return{restrict:"E",templateUrl:a.HTML.BASE_DIR+"/menu.htm",replace:!0,scope:{},controller:["$scope","$element","$attrs",b],controllerAs:"menuCtrl"}}angular.module(APP.MODULE.MENU).directive("menu",["SITE",a])}(),function(){"use strict";function a(a,b){function c(){}return c.getMenuOption=function(c,d){console.debug("MenuOptionFactory.getMenuOption",c,d);var e;switch(d.menuSelector){case"filter":e=b.newInstance(c,d);break;default:e=a.newInstance(c,d)}return console.debug("menuOptionFactory",e),e},c}angular.module(APP.MODULE.MENU).service("menuOptionFactory",["menuOption","filterOption",a])}(),function(){"use strict";function a(a,b){function c(b,c){return a.call(this,b,c)}return c.prototype=Object.create(a.prototype),c.prototype.constructor=c,c.prototype.compile=function(b,c){a.prototype.compile.apply(this,[b,c])},c.prototype.preLink=function(b,c,d){a.prototype.preLink.apply(this,[b,c,d])},c.prototype.postLink=function(c,d,e){a.prototype.postLink.apply(this,[c,d,e]),d.bind("click",function(a){console.debug("click - toggle filter visibility"),b.toggleVisible()})},c.newInstance=function(a,b){return new c(a,b)},c}angular.module(APP.MODULE.NAV).factory("filterOption",["menuOption","filtersView",a])}(),function(){"use strict";function a(){function a(a,b){return this.compile(a,b),{pre:this.preLink,post:this.postLink}}return a.prototype.compile=function(a,b){},a.prototype.preLink=function(a,b,c){},a.prototype.postLink=function(a,b,c){a.selected=!1,b.bind("click",function(b){a.selected=!a.selected,a.$applyAsync()})},a.newInstance=function(b,c){return new a(b,c)},a}angular.module(APP.MODULE.NAV).factory("menuOption",[a])}(),function(){"use strict";function a(a){return{restrict:"A",compile:a.getMenuOption}}angular.module(APP.MODULE.MENU).directive("menuSelector",["menuOptionFactory",a])}(),function(){"use strict";function a(){return{restrict:"A",require:"^^pagination",link:function(a,b,c,d){b.bind("click",d.first)}}}angular.module(APP.MODULE.NAV).directive("first",a)}(),function(){"use strict";function a(){return{restrict:"A",require:"^^pagination",link:function(a,b,c,d){b.bind("click",d.last)}}}angular.module(APP.MODULE.NAV).directive("last",a)}(),function(){"use strict";function a(){return{restrict:"A",require:"^^pagination",link:function(a,b,c,d){b.bind("click",d.next)}}}angular.module(APP.MODULE.NAV).directive("next",a)}(),function(){"use strict";function a(){function a(){Object.defineProperty(this,"currentPage",{configurable:!1,enumerable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"linesPerPage",{configurable:!1,enumerable:!1,get:function(){return h},set:function(a){h=a,e=1,f=b()}}),Object.defineProperty(this,"totalLines",{configurable:!1,enumerable:!1,get:function(){return g},set:function(a){g=a,f=b()}}),Object.defineProperty(this,"totalPages",{configurable:!1,enumerable:!1,get:function(){return f}})}function b(){if(!isNaN(h)&&!isNaN(g)){var a=Math.max(h,1),b=Math.ceil(g/a);return Math.max(b,1)}return 1}var c=200,d=1,e=1,f=d,g=0,h=c;return a.newInstance=function(){return new a},a}angular.module(APP.MODULE.NAV).factory("pageFactory",[a])}(),function(){"use strict";function a(){var a;Object.defineProperty(this,"model",{configurable:!1,enumerable:!1,get:function(){return a},set:function(b){a=b}})}angular.module(APP.MODULE.NAV).service("pageView",[a])}(),function(){"use strict";function a(a,b,c,d){function e(c,d,e){function f(a,c){a!=c&&(console.debug("watch update page "),b.model.totalLines=a)}function g(){return angular.isDefined(a.model)&&angular.isDefined(a.model.fileMap)?a.model.fileMap.length:0}c.pageView=b,this.next=function(){b.model.currentPage<b.model.totalPages&&(b.model.currentPage++,c.$apply())},this.prev=function(){b.model.currentPage>1&&(b.model.currentPage--,c.$apply())},this.first=function(){b.model.currentPage=1,c.$apply()},this.last=function(){b.model.currentPage=b.model.totalPages,c.$apply()},c.$watch(g,f)}return{restrict:"E",templateUrl:d.HTML.BASE_DIR+"/pagination.htm",replace:!0,scope:{},controller:["$scope","$element","$attrs",e],controllerAs:"pagingCtrl"}}angular.module(APP.MODULE.NAV).directive("pagination",["fileView","pageView","pageFactory","SITE",a])}(),function(){"use strict";function a(a,b){return{restrict:"E",templateUrl:b.HTML.BASE_DIR+"/pagingDetails.htm",replace:!0,scope:{},link:function(b){b.pageView=a}}}angular.module(APP.MODULE.NAV).directive("pagingDetails",["pageView","SITE",a])}(),function(){"use strict";function a(){return{restrict:"A",require:"^^pagination",link:function(a,b,c,d){b.bind("click",d.prev)}}}angular.module(APP.MODULE.NAV).directive("prev",a)}();
//# sourceMappingURL=FileFilter.min.js.map